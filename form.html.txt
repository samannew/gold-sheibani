<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>{{ action }} {{ trade_type }} {{ item }}</title>
    <style>
        body { font-family: Arial; text-align: center; background: #f4f4f4; }
        .form { max-width: 300px; margin: 50px auto; padding: 20px; border: 1px solid #ccc; background: white; border-radius: 8px; }
        input { width: 100%; margin: 10px 0; padding: 10px; border-radius: 4px; border: 1px solid #ddd; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
    <script>
        function submitForm() {
            let form = document.forms[0];
            let data = new FormData(form);
            fetch(form.action, { method: 'POST', body: data })
                .then(response => response.json())
                .then(data => alert(data.message))
                .then(() => window.location = '/{{ 'admin' if session['user'] and manager.db.execute('SELECT role FROM users WHERE username = ?', (session['user'],)).fetchone()['role'] == 'admin' else 'customer' }}');
        }
    </script>
</head>
<body>
    <div class="form">
        <h2>{{ action }} {{ trade_type }} {{ item }}</h2>
        <form method="post" onsubmit="event.preventDefault(); submitForm();">
            <input type="number" name="quantity" placeholder="مقدار" required>
            <label><input type="checkbox" name="use_online" checked> قیمت آنلاین</label>
            <input type="number" name="price" placeholder="قیمت (اختیاری)">
            <button type="submit">ثبت {{ action }}</button>
        </form>
        <button onclick="window.location='/{{ 'admin' if session['user'] and manager.db.execute('SELECT role FROM users WHERE username = ?', (session['user'],)).fetchone()['role'] == 'admin' else 'customer' }}'">بازگشت</button>
    </div>
</body>
</html>